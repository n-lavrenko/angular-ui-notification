/**
 * angular-ui-notification-lavr - Angular.js service providing simple notifications using Bootstrap 3 styles with css transitions for animating
 * @author Alex_Crack > Nikita Lavrenko
 * @version v0.6.0
 * @link https://github.com/n-lavrenko/angular-ui-notification
 * @license MIT
 */
angular.module("ui-notification").run(["$templateCache",function(i){i.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]),angular.module("ui-notification",[]),angular.module("ui-notification").provider("Notification",function(){this.options={delay:5e3,startTop:10,startRight:10,verticalSpacing:10,horizontalSpacing:10,positionX:"right",positionY:"top",replaceMessage:!1,template:null,templateUrl:"angular-ui-notification.html",onClose:void 0,closeOnClick:!0,maxCount:0,container:"body",priority:10},this.setOptions=function(i){if(!angular.isObject(i))throw new Error("Options should be an object!");this.options=angular.extend({},this.options,i)},this.$get=["$timeout","$http","$compile","$templateCache","$rootScope","$injector","$sce","$q","$window",function(i,t,n,e,o,s,a,r,l){var p=this.options,c=this,u=p.startTop,d=p.startRight,f=p.verticalSpacing,m=p.horizontalSpacing,g=p.delay,h=[],y=!1,v=function(t,e){function s(e){function o(i){["-webkit-transition","-o-transition","transition"].forEach(function(t){C.css(t,i)})}var s=t.scope.$new();s.message=a.trustAsHtml(t.message),s.title=a.trustAsHtml(t.title),s.t=t.type.substr(0,1),s.delay=t.delay,s.onClose=t.onClose;var r=function(i,t){return i._priority-t._priority},p=function(i,t){return t._priority-i._priority},g=function(){var i=0,n=0,e=u,o=d,s=[];"top"===t.positionY?h.sort(r):"bottom"===t.positionY&&h.sort(p);for(var a=h.length-1;a>=0;a--){var l=h[a];if(t.replaceMessage&&a<h.length-1)l.addClass("killed");else{var g=parseInt(l[0].offsetHeight),y=parseInt(l[0].offsetWidth),v=s[l._positionY+l._positionX];C+g>window.innerHeight&&(v=u,n++,i=0);var C=e=v?0===i?v:v+f:u,_=o+n*(m+y);l.css(l._positionY,C+"px"),"center"==l._positionX?l.css("left",parseInt(window.innerWidth/2-y/2)+"px"):l.css(l._positionX,_+"px"),s[l._positionY+l._positionX]=C+g,c.options.maxCount>0&&h.length>c.options.maxCount&&0===a&&l.scope().kill(!0),i++}}},C=n(e)(s);C._positionY=t.positionY,C._positionX=t.positionX,C._priority=t.priority,C.addClass(t.type);var _=function(i){i=i.originalEvent||i,("click"===i.type||"opacity"===i.propertyName&&i.elapsedTime>=1)&&(s.onClose&&s.$apply(s.onClose(C)),C.remove(),h.splice(h.indexOf(C),1),s.$destroy(),g())};t.closeOnClick&&(C.addClass("clickable"),C.bind("click",_)),C.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",_),angular.isNumber(t.delay)&&i(function(){C.addClass("killed")},t.delay),o("none"),angular.element(document.querySelector(t.container)).append(C);var b=-(parseInt(C[0].offsetHeight)+50);if(C.css(C._positionY,b+"px"),h.push(C),"center"==t.positionX){var k=parseInt(C[0].offsetWidth);C.css("left",parseInt(window.innerWidth/2-k/2)+"px")}i(function(){o("")}),s._templateElement=C,s.kill=function(t){t?(s.onClose&&s.$apply(s.onClose(s._templateElement)),h.splice(h.indexOf(s._templateElement),1),s._templateElement.remove(),s.$destroy(),i(g)):s._templateElement.addClass("killed")},i(g),y||(angular.element(l).bind("resize",function(t){i(g)}),y=!0),v.resolve(s)}var v=r.defer();"object"==typeof t&&null!==t||(t={message:t}),t.scope=t.scope?t.scope:o,t.delay=angular.isUndefined(t.delay)?g:t.delay,t.type=e||t.type||p.type||"",t.positionY=t.positionY?t.positionY:p.positionY,t.positionX=t.positionX?t.positionX:p.positionX,t.replaceMessage=t.replaceMessage?t.replaceMessage:p.replaceMessage,t.onClose=t.onClose?t.onClose:p.onClose,t.closeOnClick=null!==t.closeOnClick&&void 0!==t.closeOnClick?t.closeOnClick:p.closeOnClick,t.container=t.container?t.container:p.container,t.priority=t.priority?t.priority:p.priority;var C='<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>';return t.template=t.template?t.template:C,s(t.template),v.promise};return v.primary=function(i){return this(i,"primary")},v.error=function(i){return this(i,"error")},v.success=function(i){return this(i,"success")},v.info=function(i){return this(i,"info")},v.warning=function(i){return this(i,"warning")},v.clearAll=function(){angular.forEach(h,function(i){i.addClass("killed")})},v}]});